(()=>{"use strict";var n={174:(n,t,e)=>{e.d(t,{Z:()=>o});var r=e(645),a=e.n(r)()((function(n){return n[1]}));a.push([n.id,"@import url(https://fonts.googleapis.com/css2?family=Balsamiq+Sans:ital,wght@0,400;0,700;1,700&display=swap);"]),a.push([n.id,'* {\n    outline: none;\n    font-family: "Balsamiq", sans-serif;\n}\n\nbody {\n    margin: 0;\n    padding: 0;\n    background-color: #fff5f5 !important;\n}\n\nh1 {\n    font-family: "Montserrat", sans-serif;\n    font-size: 45px;\n    font-weight: 700;\n    text-align: center;\n    color: #2c3e50;\n}\n\nh2 {\n    font-family: "Montserrat", sans-serif;\n    font-size: 25px;\n    font-weight: 400;\n    text-align: center;\n    color: #2c3e50;\n}\n\n.row {\n    z-index: 99;\n    width: 100%;\n    padding: 0;\n    margin: 0;\n    justify-content: center;\n    position: relative;\n}\n\n.row2 {\n    width: 100%;\n    height: 30vh;\n    padding: 0;\n    margin: 0;\n    display: flex;\n    justify-content: center;\n    flex-direction: column;\n    position: relative;\n}\n\ninput {\n    border: none;\n}\n\ninput[type="text"]::placeholder {\n    font-size: 2rem;\n    color: #e16868;\n}\n\n#drawing-mode-options {\n    text-align: end;\n    width: 20%;\n    margin-left: auto;\n}\n\n.canvas-container {\n    margin-left: auto;\n    margin-right: auto;\n}\n\n#output {\n    font-size: 2rem;\n    color: #e16868;\n}\n\nimg,\n#input-canvas {\n    width: 50px;\n    height: 50px;\n}\n\n#input-wrapper {\n    margin-top: 2%;\n}\n\n\n/* card */\n\n.card {\n    box-shadow: 0 10px 20px 20px rgb(0 0 0 / 8%) !important;\n    border-radius: 10px !important;\n}\n\n.card2 {\n    opacity: 0.9;\n}\n\n\n/* -- SVG CSS -- */\n\n.svg-separator {\n    display: block;\n    background: 0 0;\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    z-index: 9;\n    -webkit-transform: translateY(-100%) translateY(2px);\n    transform: translateY(-100%) translateY(2px);\n    width: 100%;\n}\n\n.svg-separator.bottom {\n    top: auto;\n    bottom: 0;\n}\n\n.sep1 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep2 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep3 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep4 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep5 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep6 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep7 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep8 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep9 {\n    transform: translateY(0%) translateY(-2px) scale(-1, -1);\n    transform-origin: bottom;\n}\n\n.sep10 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep11 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n.sep12 {\n    transform: translateY(-100%) translateY(2px) scale(1, 1);\n    transform-origin: top;\n}\n\n\n/* -- Row BG Color -- */\n\n.green {\n    background-color: #03a678;\n}\n\n.green2 {\n    background-color: #1bbc9b;\n}\n\n.red {\n    background-color: #d24d57;\n}\n\n.light-grey {\n    background-color: #ecf0f1;\n}\n\n.light-grey2 {\n    background-color: #ecf0f1;\n}\n\n.dark-blue {\n    background-color: #22313f;\n}\n\n.grey-blue {\n    background-color: #6c7a89;\n}\n\n.black {\n    background-color: #333;\n}\n\n.stupid-blue {\n    background-color: #19b5fe;\n}\n\n\n/* btn */\n\n.btn-hover {\n    width: 200px;\n    font-size: 16px;\n    font-weight: 600;\n    color: #fff;\n    cursor: pointer;\n    margin: 20px;\n    height: 55px;\n    text-align: center;\n    border: none;\n    background-size: 300% 100%;\n    border-radius: 50px;\n    moz-transition: all 0.4s ease-in-out;\n    -o-transition: all 0.4s ease-in-out;\n    -webkit-transition: all 0.4s ease-in-out;\n    transition: all 0.4s ease-in-out;\n}\n\n.btn-hover:hover {\n    background-position: 100% 0;\n    moz-transition: all 0.4s ease-in-out;\n    -o-transition: all 0.4s ease-in-out;\n    -webkit-transition: all 0.4s ease-in-out;\n    transition: all 0.4s ease-in-out;\n}\n\n.btn-hover:focus {\n    outline: none;\n}\n\n.btn-hover.color-10 {\n    margin-left: auto;\n    margin-right: auto;\n    background-image: linear-gradient(to right, #ed6ea0, #ec8c69, #f7186a, #fbb03b);\n    box-shadow: 0 4px 15px 0 rgba(236, 116, 149, 0.75);\n}\n\n.btn-hover.color-9 {\n    background-image: linear-gradient(to right, #25aae1, #4481eb, #04befe, #3f86ed);\n    box-shadow: 0 4px 15px 0 rgba(65, 132, 234, 0.75);\n}',""]);const o=a},645:n=>{n.exports=function(n){var t=[];return t.toString=function(){return this.map((function(t){var e=n(t);return t[2]?"@media ".concat(t[2]," {").concat(e,"}"):e})).join("")},t.i=function(n,e,r){"string"==typeof n&&(n=[[null,n,""]]);var a={};if(r)for(var o=0;o<this.length;o++){var i=this[o][0];null!=i&&(a[i]=!0)}for(var s=0;s<n.length;s++){var l=[].concat(n[s]);r&&a[l[0]]||(e&&(l[2]?l[2]="".concat(e," and ").concat(l[2]):l[2]=e),t.push(l))}},t}},379:(n,t,e)=>{var r,a=function(){var n={};return function(t){if(void 0===n[t]){var e=document.querySelector(t);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(n){e=null}n[t]=e}return n[t]}}(),o=[];function i(n){for(var t=-1,e=0;e<o.length;e++)if(o[e].identifier===n){t=e;break}return t}function s(n,t){for(var e={},r=[],a=0;a<n.length;a++){var s=n[a],l=t.base?s[0]+t.base:s[0],c=e[l]||0,u="".concat(l," ").concat(c);e[l]=c+1;var d=i(u),f={css:s[1],media:s[2],sourceMap:s[3]};-1!==d?(o[d].references++,o[d].updater(f)):o.push({identifier:u,updater:m(f,t),references:1}),r.push(u)}return r}function l(n){var t=document.createElement("style"),r=n.attributes||{};if(void 0===r.nonce){var o=e.nc;o&&(r.nonce=o)}if(Object.keys(r).forEach((function(n){t.setAttribute(n,r[n])})),"function"==typeof n.insert)n.insert(t);else{var i=a(n.insert||"head");if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(t)}return t}var c,u=(c=[],function(n,t){return c[n]=t,c.filter(Boolean).join("\n")});function d(n,t,e,r){var a=e?"":r.media?"@media ".concat(r.media," {").concat(r.css,"}"):r.css;if(n.styleSheet)n.styleSheet.cssText=u(t,a);else{var o=document.createTextNode(a),i=n.childNodes;i[t]&&n.removeChild(i[t]),i.length?n.insertBefore(o,i[t]):n.appendChild(o)}}function f(n,t,e){var r=e.css,a=e.media,o=e.sourceMap;if(a?n.setAttribute("media",a):n.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),n.styleSheet)n.styleSheet.cssText=r;else{for(;n.firstChild;)n.removeChild(n.firstChild);n.appendChild(document.createTextNode(r))}}var p=null,h=0;function m(n,t){var e,r,a;if(t.singleton){var o=h++;e=p||(p=l(t)),r=d.bind(null,e,o,!1),a=d.bind(null,e,o,!0)}else e=l(t),r=f.bind(null,e,t),a=function(){!function(n){if(null===n.parentNode)return!1;n.parentNode.removeChild(n)}(e)};return r(n),function(t){if(t){if(t.css===n.css&&t.media===n.media&&t.sourceMap===n.sourceMap)return;r(n=t)}else a()}}n.exports=function(n,t){(t=t||{}).singleton||"boolean"==typeof t.singleton||(t.singleton=(void 0===r&&(r=Boolean(window&&document&&document.all&&!window.atob)),r));var e=s(n=n||[],t);return function(n){if(n=n||[],"[object Array]"===Object.prototype.toString.call(n)){for(var r=0;r<e.length;r++){var a=i(e[r]);o[a].references--}for(var l=s(n,t),c=0;c<e.length;c++){var u=i(e[c]);0===o[u].references&&(o[u].updater(),o.splice(u,1))}e=l}}}}},t={};function e(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return n[r](o,o.exports,e),o.exports}e.n=n=>{var t=n&&n.__esModule?()=>n.default:()=>n;return e.d(t,{a:t}),t},e.d=(n,t)=>{for(var r in t)e.o(t,r)&&!e.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:t[r]})},e.o=(n,t)=>Object.prototype.hasOwnProperty.call(n,t),(()=>{var n=e(379),t=e.n(n),r=e(174);function a(n,t){if(n){if("string"==typeof n)return o(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return"Object"===e&&n.constructor&&(e=n.constructor.name),"Map"===e||"Set"===e?Array.from(n):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?o(n,t):void 0}}function o(n,t){(null==t||t>n.length)&&(t=n.length);for(var e=0,r=new Array(t);e<t;e++)r[e]=n[e];return r}function i(n,t){var e=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),e.push.apply(e,r)}return e}function s(n,t,e){return t in n?Object.defineProperty(n,t,{value:e,enumerable:!0,configurable:!0,writable:!0}):n[t]=e,n}function l(n,t){if(!(n instanceof t))throw new TypeError("Cannot call a class as a function")}function c(n,t){for(var e=0;e<t.length;e++){var r=t[e];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function u(n,t,e){return t&&c(n.prototype,t),e&&c(n,e),n}t()(r.Z,{insert:"head",singleton:!1}),r.Z.locals;var d=function(){function n(){l(this,n);var t=document.getElementById.bind(document);this.model=new f,this.drawingLineWidthEl=t("drawing-line-width"),this.clearEl=t("clear-canvas"),this.outputEl=t("output"),this.canvas=new fabric.Canvas("handwriting",{backgroundColor:"#fff",isDrawingMode:!0}),this.canvas.freeDrawingBrush.color="#000",this.resetCanvas(!0),this.resizeCanvas(),this.model.isWarmedUp.then(this.bindEvents.bind(this))}return u(n,[{key:"resetCanvas",value:function(){var n=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.canvas.clear(),this.canvas.backgroundColor="#D24D57",n&&(this.outputEl.value="",this.model.clearInput())}},{key:"resizeCanvas",value:function(){this.canvas.setDimensions({width:window.innerWidth-900,height:window.innerHeight-500}),this.canvas.calcOffset(),this.canvas.renderAll()}},{key:"captureDrawing",value:function(){var n=new fabric.Group(this.canvas.getObjects()),t=n.left,e=n.top,r=n.width,a=n.height,o=window.devicePixelRatio,i=this.canvas.contextContainer.getImageData(t*o,e*o,r*o,a*o);return this.resetCanvas(!1),i}},{key:"showRect",value:function(n){var t=function(n){for(var t=1;t<arguments.length;t++){var e=null!=arguments[t]?arguments[t]:{};t%2?i(Object(e),!0).forEach((function(t){s(n,t,e[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(e)):i(Object(e)).forEach((function(t){Object.defineProperty(n,t,Object.getOwnPropertyDescriptor(e,t))}))}return n}({fill:"rgba(255,127,39,.5)"},n);this.canvas.add(new fabric.Rect(t))}},{key:"showCapturedData",value:function(n){var t=document.getElementById("output"),e=t.getContext("2d");t.width=n.width,t.height=n.height,e.putImageData(n,0,0)}},{key:"bindEvents",value:function(){var n=this;this.outputEl.placeholder="Output...",this.clearEl.onclick=this.resetCanvas.bind(this),this.drawingLineWidthEl.onchange=function(t){var e=t.target;n.canvas.freeDrawingBrush.width=parseInt(e.value,10)||1,e.previousSibling.innerHTML=e.value},this.canvas.freeDrawingBrush.width=parseInt(this.drawingLineWidthEl.value,10)||1,this.drawingLineWidthEl.previousSibling.innerHTML=this.canvas.freeDrawingBrush.width;var t=null,e="ontouchstart"in window?400:800,r=!0;this.canvas.on("mouse:down",(function(e){r&&n.resetCanvas(!1),r=!1,t&&(clearTimeout(t),t=null)})).on("mouse:up",(function(){t=setTimeout((function(){r=!0;var t,e,o=(t=n.model.predict(n.captureDrawing()),e=2,function(n){if(Array.isArray(n))return n}(t)||function(n,t){var e=n&&("undefined"!=typeof Symbol&&n[Symbol.iterator]||n["@@iterator"]);if(null!=e){var r,a,o=[],i=!0,s=!1;try{for(e=e.call(n);!(i=(r=e.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(n){s=!0,a=n}finally{try{i||null==e.return||e.return()}finally{if(s)throw a}}return o}}(t,e)||a(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0];o[1],n.outputEl.value+=i}),e)})),window.onresize=this.resizeCanvas.bind(this)}}]),n}(),f=function(){function n(){l(this,n),this.alphabet="abcdefghijklmnopqrstuvwxyz",this.characters="0123456789"+this.alphabet.toUpperCase()+this.alphabet,this.inputCanvas=document.getElementById("input-canvas"),this.isWarmedUp=this.loadModel().then(this.warmUp.bind(this)).then((function(){return console.info("Backend running on:",tf.getBackend())}))}return u(n,[{key:"loadModel",value:function(){var n=this;return console.time("Load model"),tf.loadLayersModel("../model/model.json").then((function(t){n._model=t,console.timeEnd("Load model")}))}},{key:"warmUp",value:function(){console.time("Warmup"),this._model.predict(tf.randomNormal([1,28,28,1])).as1D().dataSync(),this.isWarmedUp=!0,console.timeEnd("Warmup")}},{key:"preprocessImage",value:function(n){var t=this,e=n.width>n.height,r=Math.round((Math.max(n.width,n.height)-Math.min(n.width,n.height))/2),a=e?[[r,r],[0,0],[0,0]]:[[0,0],[r,r],[0,0]],o=null;return o&&o.dispose(),tf.tidy((function(){var e=tf.browser.fromPixels(n,1).pad(a,255);return e=tf.image.resizeBilinear(e,[24,24]).pad([[2,2],[2,2],[0,0]],255),e=tf.scalar(1).sub(e.toFloat().div(tf.scalar(255))),o=tf.keep(tf.clone(e)),t.showInput(o),e.expandDims(0)}))}},{key:"predict",value:function(n){if(!this._model)return console.warn("Model not loaded...!");console.time("Prediction");var t=this.preprocessImage(n),e=this._model.predict(t).as1D(),r=e.argMax().dataSync()[0],a=e.max().dataSync()[0],o=this.characters[r];return console.log("Predicted",o,"Probability",a),console.timeEnd("Prediction"),[o,a]}},{key:"clearInput",value:function(){var n;(n=this.inputCanvas.parentElement.getElementsByTagName("img"),function(n){if(Array.isArray(n))return o(n)}(n)||function(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}(n)||a(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(n){return n.remove()})),this.inputCanvas.getContext("2d").clearRect(0,0,this.inputCanvas.width,this.inputCanvas.height)}},{key:"showInput",value:function(n){var t=new Image;t.src=this.inputCanvas.toDataURL("image/png"),this.inputCanvas.parentElement.insertBefore(t,this.inputCanvas),tf.browser.toPixels(n,this.inputCanvas)}}],[{key:"log",value:function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:28,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:28;t=t.dataSync(),console.log("Tensor name",n,t);for(var a=0;a<e*r;a+=e)console.log(t.slice(a,a+e).reduce((function(n,t){return n+(0===t?"0":"1").padStart(2)})),"")}}]),n}();new d})()})();